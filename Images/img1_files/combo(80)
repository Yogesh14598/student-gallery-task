YUI.add("hermes-template-print-button",function(n,e){var t=n.Template.Handlebars.revive({1:function(n,e,t,l,r){var o,a=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return" "+n.escapeExpression("function"==typeof(o=null!=(o=a(t,"iconSize")||(null!=e?a(e,"iconSize"):e))?o:n.hooks.helperMissing)?o.call(null!=e?e:n.nullContext||{},{name:"iconSize",hash:{},data:r,loc:{start:{line:3,column:52},end:{line:3,column:64}}}):o)},compiler:[8,">= 4.3.0"],main:function(n,e,t,l,r){var o,a=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<div class="print-button-container">\n\t<a role="button" class="print-button">\n\t\t<svg class="icon icon-cart_hollow'+(null!=(o=a(t,"if").call(null!=e?e:n.nullContext||{},null!=e?a(e,"iconSize"):e,{name:"if",hash:{},fn:n.program(1,r,0),inverse:n.noop,data:r,loc:{start:{line:3,column:35},end:{line:3,column:71}}}))?o:"")+'"><use xlink:href="#icon-cart_hollow"></use></svg>\n\t</a>\n</div>'},useData:!0}),l={};n.Array.each([],function(e){var t=n.Template.get("hermes/"+e);t&&(l[e]=t)}),n.Template.register("hermes/print-button",function(e,r){return r=r||{},r.partials=r.partials?n.merge(l,r.partials):l,t(e,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-print-icon-tooltip",function(e,n){var t=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,n,t,a,l){var s=null!=n?n:e.nullContext||{},i=e.hooks.helperMissing,r=e.escapeExpression,o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="print-icon-tooltip-container">\n\t<header>\n\t\t<h3>'+r((o(t,"intlMessage")||n&&o(n,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"common.NEW"},data:l,loc:{start:{line:3,column:6},end:{line:3,column:43}}}))+'</h3>\n\t\t<svg class="close-x-button"><use xlink:href="#icon-close"></use></svg>\n\t</header>\n\t<div class="print-icon-description">\n\t\t<span>'+r((o(t,"intlMessage")||n&&o(n,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"prints.PRINT_TOOLTIP_TEXT_1"},data:l,loc:{start:{line:7,column:8},end:{line:7,column:62}}}))+'</span>\n\t\t<a href="/prints">'+r((o(t,"intlMessage")||n&&o(n,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"common.LEARN_MORE"},data:l,loc:{start:{line:8,column:20},end:{line:8,column:64}}}))+'</a>\n\t</div>\n\t<div class="print-icon-fine-print">'+r((o(t,"intlMessage")||n&&o(n,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"prints.PRINT_TOOLTIP_TEXT_2"},data:l,loc:{start:{line:10,column:36},end:{line:10,column:90}}}))+"</div>\n</div>\n"},useData:!0}),a={};e.Array.each([],function(n){var t=e.Template.get("hermes/"+n);t&&(a[n]=t)}),e.Template.register("hermes/print-icon-tooltip",function(n,l){return l=l||{},l.partials=l.partials?e.merge(a,l.partials):a,t(n,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-prepare-print-modal",function(e,t){var a=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,a,n,l){var s,i=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,o=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="prepare-print-modal-container loading">\n\t<div class="loading-container">\n\t\t<span class="preparing-text">'+o((c(a,"intlMessage")||t&&c(t,"intlMessage")||r).call(i,{name:"intlMessage",hash:{intlName:"prints.PREPARING_YOUR_PHOTO"},data:l,loc:{start:{line:3,column:31},end:{line:3,column:85}}}))+'</span>\n\t\t<span class="flickr-balls-container">\n'+(null!=(s=e.invokePartial(c(n,"flickr-balls"),t,{name:"flickr-balls",data:l,indent:"\t\t\t",helpers:a,partials:n,decorators:e.decorators}))?s:"")+'\t\t</span>\n\t</div>\n\t<div class="error-container">\n\t\t<h1>'+o((c(a,"intlMessage")||t&&c(t,"intlMessage")||r).call(i,{name:"intlMessage",hash:{intlName:"common.OOPS"},data:l,loc:{start:{line:9,column:6},end:{line:9,column:44}}}))+'</h1>\n\t\t<p class="error-message"></p>\n\t\t<div class="button-container">\n\t\t\t<button class="mini alt cancel-button">'+o((c(a,"intlMessage")||t&&c(t,"intlMessage")||r).call(i,{name:"intlMessage",hash:{intlName:"common.CANCEL"},data:l,loc:{start:{line:12,column:42},end:{line:12,column:82}}}))+'</button>\n\t\t\t<button class="mini action retry-button">'+o((c(a,"intlMessage")||t&&c(t,"intlMessage")||r).call(i,{name:"intlMessage",hash:{intlName:"common.RETRY"},data:l,loc:{start:{line:13,column:44},end:{line:13,column:83}}}))+"</button>\n\t\t</div>\n\t</div>\n</div>"},usePartial:!0,useData:!0}),n={};e.Array.each(["flickr-balls"],function(t){var a=e.Template.get("hermes/"+t);a&&(n[t]=a)}),e.Template.register("hermes/prepare-print-modal",function(t,l){return l=l||{},l.partials=l.partials?e.merge(n,l.partials):n,a(t,l)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-flickr-balls"]});YUI.add("prepare-print-modal-view",function(e,r){require("hermes-core/flog")(r);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){},buildContainer:function(){this.setContainerWithTemplate("prepare-print-modal")},activate:function(){var e=this,r=this.get("container");this.contentContainer=r.one(".prepare-print-modal-container"),this.loadingContainer=r.one(".loading-container"),this.errorContainer=r.one(".error-container"),this.errorTextContainer=this.errorContainer.one(".error-message"),this.errorRetryButton=this.errorContainer.one("button.retry-button"),this.errorCancelButton=this.errorContainer.one("button.cancel-button"),this.registerEventHandler(this.errorRetryButton.on("click",function(){e.fire("retryClicked")})),this.registerEventHandler(this.errorCancelButton.on("click",function(){e.fire("closeClicked")}))},showError:function(e){this.contentContainer.removeClass("loading"),this.contentContainer.addClass("error"),e&&this.errorTextContainer.set("text",e)},showLoading:function(){this.contentContainer.addClass("loading"),this.contentContainer.removeClass("error")}})},"@VERSION@",{requires:["flickr-view","hermes-template-prepare-print-modal"],langBundles:["common","prints"]});YUI.add("print-button-view",function(t,i){require("hermes-core/flog")(i);t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(i){this.params=i,this.disableClicks=i.disableClicks,this.iconSize=void 0!==i.iconSize?i.iconSize:"normal",this.photoPrintsHelper=new t.PhotoPrintsHelper(this.appContext),this.selectors={printButton:".print-button-container .print-button",newLabel:".print-button-container .label-beta"}},loadState:function(){var t=this;return this.appContext.getModel("photo-models",this.params.photoId).then(function(i){t.photoModel=i})},buildContainer:function(){this.setContainerWithTemplate("print-button",{iconSize:this.iconSize})},activate:function(){var t=this.get("container");this.printButtonNode=t.one(this.selectors.printButton),this.printNewLabelNode=t.one(this.selectors.newLabel),this.disableClicks||(this.printButtonNode&&this.registerEventHandler(this.printButtonNode.on("click",this.handlePrintClick.bind(this))),this.printNewLabelNode&&this.registerEventHandler(this.printNewLabelNode.on("click",this.showPrintTooltip.bind(this))))},handlePrintClick:function(){"en-us"===this.appContext.lang.toLowerCase()?this.preparePrint():this.showEnglishWarningModal()},preparePrint:function(){var i=this;this.showPreparingPrintModal(),this.photoPrintsHelper.registerPrint(this.photoModel,t.config.win.location.href).then(function(i){t.config.win.location.href=i.redirectURL}).catch(function(t){i.preparePrintModalSubview.showError(t.message||i.intlMessage({intlName:"prints.SOMETHING_WRONG_PREPARING_PRINT"}))})},showEnglishWarningModal:function(i){var e=this;this.englishWarningModal=new t.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!1,showActionButton:!0,actionButtonLabel:this.intlMessage({intlName:"prints.CONTINUE_IN_ENGLISH"}),showCancelButton:!0,cancelButtonLabel:"en-us"===this.appContext.lang.toLowerCase()?this.intlMessage({intlName:"common.GO_BACK_BUTTON"}):this.intlMessage({intlName:"common.CANCEL"}),showCancelX:!1,showHeader:!0,showFooter:!0,title:this.intlMessage({intlName:"prints.ENGLISH_LANGUAGE_AHEAD"}),message:this.intlMessage({intlName:"prints.ORDERING_IS_ENGLISH_ONLY"}),hideModalOverlay:!1}),this.englishWarningModal.show(),this.englishWarningModal.on("actionClick",function(){e.englishWarningModal.close(),setTimeout(function(){e.preparePrint()},0)})},showPreparingPrintModal:function(){var i=this;this.preparePrintModalSubview=new t.Views["prepare-print-modal-view"]({appContext:this.appContext}),this.preparingPrintModal=new t.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!1,showActionButton:!1,showCancelButton:!1,showCancelX:!1,showHeader:!1,showFooter:!1,subview:this.preparePrintModalSubview,hideModalOverlay:!1,contentPadding:0}),this.preparingPrintModal.show(),this.preparePrintModalSubview.on("retryClicked",function(){i.preparingPrintModal.close(),setTimeout(function(){i.preparePrint()},0)}),this.preparePrintModalSubview.on("closeClicked",function(){i.preparingPrintModal.close()})},showPrintTooltip:function(){var i,e=this,n=this.printButtonNode;n&&(this.tooltip=new t.Views.FluidDroparound({appContext:this.appContext,htmlMessage:this.templates("print-icon-tooltip")({}),showDropArrow:!0,dismissOnOverlayClick:!0,observePageResize:!0,anchorElement:n,keyboardAnchorElement:n,minVerticalSpace:400,width:300,positionFixed:!0,preferLeft:!0,closeOnScroll:!0,anchorOffsetVertical:0}),i=this.tooltip.get("container"),this.registerEventHandler(i.delegate("click",function(t){e.tooltip.close()},".close-x-button")),this.tooltip.show())}})},"@VERSION@",{requires:["flickr-view","hermes-template-print-button","hermes-template-print-icon-tooltip","prepare-print-modal-view","photo-prints-helper"],optional:["photo-models"],langBundles:["common","prints"]});YUI.add("photo-engagement-view",function(e,t){require("hermes-core/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.photoId=t.photoId,this.nsid=t.nsid,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.signinPendingQueue=t.signinPendingQueue,this.photoPrintsHelper=new e.PhotoPrintsHelper(this.appContext),this.signedIn=this.appContext.getViewer().signedIn,this.photoCardHelper=new e.PhotoCardHelper(this.appContext),this.curationHelper=new e.CurationHelper(this.appContext),t.subviewParams={"like-engagement-item-view":{photoId:t.photoId,showCount:!1,size:"medium",isPadded:!0}},this},subviewConfig:{"fave-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,hideWhoFaved:!0,additionalViewClasses:["engagement-item"],disabled:function(){return this.appContext.flipper.isFlipped("enable-likes")}},"like-engagement-item-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,additionalViewClasses:["engagement-item"],theme:"light",disabled:function(){return!this.appContext.flipper.isFlipped("enable-likes")}},"photo-well-scrappy-edit-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,additionalViewClasses:["engagement-item"]},"fluid-share-photo-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,additionalViewClasses:["engagement-item"],theme:"light"},"photo-sidebar-toggle-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,inlineStyling:!0,disabled:function(){return!this.appContext.flipper.isFlipped("enable-similarity-search-from-photo-page")}},"print-button-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,additionalViewClasses:["engagement-item"]}},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(t){e.set("photo",t)})},buildContainer:function(){var e,t=this.get("photo"),i=t.getValue("owner"),n=this.get("container"),o=this.photoCardHelper.convertPhotoModel(t);return e={"share-view":this.subviews["fluid-share-photo-view"]?this.subviews["fluid-share-photo-view"].get("container"):"",photoId:t.getValue("id"),ownerId:t.getValue("owner").getValue("id"),isVideo:t.getValue("isVideo"),viewerIsOwner:i.getValue("isMe"),downloadingAvailable:!1,downloadLink:"",hasFullScreenButton:this.appContext.flipper.isFlipped("enable-similarity-search-from-photo-page"),showPrintButton:this.photoPrintsHelper.isPrintsEnabled()&&this.photoPrintsHelper.canPrintPhoto(t),photoItem:o,signedIn:this.signedIn},t.getValue("isVideo")?this.appContext.flipper.isFlipped("disable-video-playback")?e.downloadingAvailable=!1:(e.downloadLink="/video_download.gne?id="+t.getValue("id"),this.appContext.flipper.isFlipped("enable-album-download")&&(e.downloadingAvailable=t.getValue("engagement").getValue("canDownload")),i.getValue("isMe")&&(e.downloadingAvailable=!0)):(e.downloadLink=t.getValue("url")+"/sizes/l/",e.downloadingAvailable=!0),this.appContext.forceServerRender&&(e.downloadItems=this.getDownloadMenuItems()),this.setContainerWithTemplate("photo-engagement",e),e.hasFullScreenButton&&n.addClass("has-fullscreen"),this},activate:function(){this.get("photo").getValue("license");var e=this.get("container");if(this.signinPendingQueue&&this.signinPendingQueue.length>0)for(var t=this.signinPendingQueue,i=0;i<t.length;i++)"download"===t[i].key&&t[i].value&&t[i].value.id===this.photoId&&this.downloadItem(t[i].value.imageUrl);return e.all(".sizes li a.download-image-size")&&this.registerEventHandler(e.all(".sizes li a.download-image-size").on("click",this.handleDownloadItemClick,this)),this.attachKeyEvent("down:68",this.handleDownloadMenuButtonClick.bind(this)),this.registerEventHandler(e.delegate("click",this.handleDownloadMenuButtonClick.bind(this),".download a")),this.curateNode=e.one(".engagement-item.curate"),this.curateNode&&this.registerEventHandler(this.curateNode.on("click",this.handleCurateClick.bind(this))),this},getDownloadMenuItems:function(t){var i,n=this.get("photo"),o=e.clone(n.getValue("sizes")),a=[],l=n.getValue("engagement").getValue("canDownload"),s=this;for(["q","sq"].some(function(e){if(o[e])return o[e].label=s.intlMessage({intlName:"photo-page-scrappy.SQUARE"}),a.push(o[e])}),["w","n","s","t"].some(function(e){if(o[e])return o[e].label=s.intlMessage({intlName:"photo-page-scrappy.SMALL"}),a.push(o[e])}),["c","z","m"].some(function(e){if(o[e])return o[e].label=s.intlMessage({intlName:"photo-page-scrappy.MEDIUM"}),a.push(o[e])}),["k","h","l"].some(function(e){if(o[e])return o[e].label=s.intlMessage({intlName:"photo-page-scrappy.LARGE"}),a.push(o[e])}),["6k","5k","4k","3k"].some(function(e){if(o[e])return o[e].label=s.intlMessage({intlName:"common.XLARGE"}),a.push(o[e])}),o.o&&(o.o.label=this.intlMessage({intlName:"photo-page-scrappy.ORIGINAL"}),a.push(o.o)),i=0;i<a.length;i++)a[i].url=a[i].displayUrl.replace(/^(.+)(\..+)$/,"$1_d$2");return this.templates("scrappy-download-menu")({photoURL:n.getValue("url"),sizes:a,showDownloadSizes:l})},createDownloadDialog:function(t){var i=this.get("container"),n=this;this.downloadMenu&&(this.downloadMenu.close(),this.downloadMenu=null),this.downloadMenu=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!0,preferTop:!0,showDropArrow:!0,anchorOffsetVertical:5,width:200,anchorElement:i.one(".download"),htmlMessage:t,closeOnScroll:!1,classList:"download-dialog-tooltip",hideModalOverlay:!0,autoSizeToContent:!0}),this.downloadMenu.on("activated",function(e){n.fire("subviewViewEvent","make in view",i)}),this.downloadMenu.on("closeDroparound",function(e){n.fire("subviewViewEvent","close in view")}),this.downloadMenu.show()},handleDownloadMenuButtonClick:function(i){var n=this.get("photo");if(i.target.ancestor(".download",!0).hasClass("disabled"))i.preventDefault();else if(n.getValue("isVideo")){if(this.appContext.flipper.isFlipped("enable-album-download"))this.handleDownloadItemClick(i);else if(!n.getValue("owner").getValue("isMe"))return i.preventDefault(),!1}else i.halt(),this.createDownloadDialog(this.getDownloadMenuItems());e.rapidTracker.beacon(t,"downloadDialogClick")},handleDownloadItemClick:function(e){e.preventDefault(),this.downloadItem(e.currentTarget.getAttribute("href")),this.downloadMenu&&(this.downloadMenu.close(),this.downloadMenu=null)},downloadItem:function(e){document.location=e},handleCurateClick:function(){var e=this,t=this.get("photo").getValue("isOwner");"fluid-droparound-view"===this.curationHelper.showAddToCuration({photoId:this.get("photo").getValue("id"),showAlbums:t,showGalleries:!t,anchorNode:this.curateNode}).name&&(this.fire("menuOpened"),this.curationHelper.on("curateDroparoundClosed",function(){e.fire("menuClosed"),e.curateNode.removeClass("active")}),this.curateNode.addClass("active"))}})},"@VERSION@",{requires:["flickr-view","hermes-template-photo-engagement","hermes-template-scrappy-download-menu","signup-modal-view","fluid-share-photo-view","fluid-droparound-view","print-button-view","better-throttle","photo-prints-helper","photo-card-helper"],optional:["photo-models"],langBundles:["common","photo-page-scrappy"]});YUI.add("hermes-template-head-breadcrumb",function(t,l){var n=t.Template.Handlebars.revive({1:function(t,l,n,e,a){var o,i=null!=l?l:t.nullContext||{},r=t.hooks.helperMissing,s="function",c=t.escapeExpression,p=t.lookupProperty||function(t,l){if(Object.prototype.hasOwnProperty.call(t,l))return t[l]};return'<script type="application/ld+json">\n\t[{\n\t\t"@context": "http://schema.org",\n\t\t"@type": "BreadcrumbList",\n\t\t"itemListElement": [\n\t\t\t{\n\t\t\t\t"@type": "ListItem",\n\t\t\t\t"position": 1,\n\t\t\t\t"item": {\n\t\t\t\t\t"@id": "https://www.flickr.com/photos/'+c(typeof(o=null!=(o=p(n,"pathAliasOrNsid")||(null!=l?p(l,"pathAliasOrNsid"):l))?o:r)===s?o.call(i,{name:"pathAliasOrNsid",hash:{},data:a,loc:{start:{line:11,column:43},end:{line:11,column:62}}}):o)+'",\n\t\t\t\t\t"name": "'+c(typeof(o=null!=(o=p(n,"displayName")||(null!=l?p(l,"displayName"):l))?o:r)===s?o.call(i,{name:"displayName",hash:{},data:a,loc:{start:{line:12,column:14},end:{line:12,column:29}}}):o)+'",\n\t\t\t\t\t"image": "https:'+c(typeof(o=null!=(o=p(n,"avatarUrl")||(null!=l?p(l,"avatarUrl"):l))?o:r)===s?o.call(i,{name:"avatarUrl",hash:{},data:a,loc:{start:{line:13,column:21},end:{line:13,column:34}}}):o)+'"\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\t"@type": "ListItem",\n\t\t\t\t"position": 2,\n\t\t\t\t"item": {\n\t\t\t\t\t"@id": "https://www.flickr.com/photos/'+c(typeof(o=null!=(o=p(n,"pathAliasOrNsid")||(null!=l?p(l,"pathAliasOrNsid"):l))?o:r)===s?o.call(i,{name:"pathAliasOrNsid",hash:{},data:a,loc:{start:{line:19,column:43},end:{line:19,column:62}}}):o)+"/"+c(typeof(o=null!=(o=p(n,"photoId")||(null!=l?p(l,"photoId"):l))?o:r)===s?o.call(i,{name:"photoId",hash:{},data:a,loc:{start:{line:19,column:63},end:{line:19,column:74}}}):o)+'",\n\t\t\t\t\t"name": "'+c(typeof(o=null!=(o=p(n,"title")||(null!=l?p(l,"title"):l))?o:r)===s?o.call(i,{name:"title",hash:{},data:a,loc:{start:{line:20,column:14},end:{line:20,column:23}}}):o)+'",\n\t\t\t\t\t"image": "https:'+c(typeof(o=null!=(o=p(n,"photoPreview")||(null!=l?p(l,"photoPreview"):l))?o:r)===s?o.call(i,{name:"photoPreview",hash:{},data:a,loc:{start:{line:21,column:21},end:{line:21,column:37}}}):o)+'"\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t"@context": "https://schema.org/",\n\t\t"@type": "ImageObject",\n\t\t"contentUrl": "https:'+c(typeof(o=null!=(o=p(n,"photoPreview")||(null!=l?p(l,"photoPreview"):l))?o:r)===s?o.call(i,{name:"photoPreview",hash:{},data:a,loc:{start:{line:29,column:23},end:{line:29,column:39}}}):o)+'",\n\t\t"license": "'+c(typeof(o=null!=(o=p(n,"licenseUrl")||(null!=l?p(l,"licenseUrl"):l))?o:r)===s?o.call(i,{name:"licenseUrl",hash:{},data:a,loc:{start:{line:30,column:14},end:{line:30,column:28}}}):o)+'",\n\t\t"acquireLicensePage": "https://www.flickr.com/photos/'+c(typeof(o=null!=(o=p(n,"pathAliasOrNsid")||(null!=l?p(l,"pathAliasOrNsid"):l))?o:r)===s?o.call(i,{name:"pathAliasOrNsid",hash:{},data:a,loc:{start:{line:31,column:55},end:{line:31,column:74}}}):o)+"/"+c(typeof(o=null!=(o=p(n,"photoId")||(null!=l?p(l,"photoId"):l))?o:r)===s?o.call(i,{name:"photoId",hash:{},data:a,loc:{start:{line:31,column:75},end:{line:31,column:86}}}):o)+'"\n\t}]\n<\/script>\n'},compiler:[8,">= 4.3.0"],main:function(t,l,n,e,a){var o,i=t.lookupProperty||function(t,l){if(Object.prototype.hasOwnProperty.call(t,l))return t[l]};return null!=(o=i(n,"if").call(null!=l?l:t.nullContext||{},null!=l?i(l,"photoPreview"):l,{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.noop,data:a,loc:{start:{line:1,column:0},end:{line:34,column:7}}}))?o:""},useData:!0}),e={};t.Array.each([],function(l){var n=t.Template.get("hermes/"+l);n&&(e[l]=n)}),t.Template.register("hermes/head-breadcrumb",function(l,a){return a=a||{},a.partials=a.partials?t.merge(e,a.partials):e,n(l,a)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photo-head-meta-view",function(e){var t=e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this},subviewConfig:{},buildContainer:function(){return this},loadState:function(){var t=this;return e.Promise.all([t.appContext.getModel("photo-head-meta-models",t._params.photoId),t.appContext.getModel("photo-models",t._params.photoId),t.appContext.getModel("photo-privacy-models",t._params.photoId)]).then(function(e){t.set("photo-meta",e[0]),t.set("photo",e[1]),t.set("photo-privacy",e[2])})},mapLicenseUrl:function(t){return[e.url(this.get("photo").getValue("url")),"https://creativecommons.org/licenses/by-nc-sa/2.0/","https://creativecommons.org/licenses/by-nc/2.0/","https://creativecommons.org/licenses/by-nc-nd/2.0/","https://creativecommons.org/licenses/by/2.0/","https://creativecommons.org/licenses/by-sa/2.0/","https://creativecommons.org/licenses/by-nd/2.0/","/commons/usage/","http://www.usa.gov/copyright.shtml","https://creativecommons.org/publicdomain/zero/1.0/","https://creativecommons.org/publicdomain/mark/1.0/"][t]},buildHeadContainer:function(){var t,a=this.get("photo-meta"),o=this.get("photo"),i=o.getValue("owner"),l=i.getValue("buddyicon"),m=this.get("photo-privacy"),s=e.url(),n=a.getFieldsForDisplay(),r="",h=this,p=[{id:"canonicalurl",rel:"canonical",href:s+o.getValue("url")},{rel:"alternative",type:"application/json+oembed",href:s+"/services/oembed?url="+encodeURI(s+o.getValue("url"))+"&format=json",title:o.getValue("title")},{rel:"alternative",type:"text/xml+oembed",href:s+"/services/oembed?url="+encodeURI(s+o.getValue("url"))+"&format=xml",title:o.getValue("title")}];n["al:ios:url"]||(n["al:ios:url"]="flickr://flickr.com"+o.getValue("url")),r+=this.templates("head-meta")({isName:!0,metaName:"description",metaValue:o.getValue("description")||""})+"\n";var d="noarchive";return m.getValue("isPublic")&&!m.getValue("isHidden")||(d+=", noindex"),r+=this.templates("head-meta")({isName:!0,metaName:"robots",metaValue:d}),r+=this.templates("head-meta")({isName:!0,metaName:"googlebot",metaValue:d}),Object.keys(n).forEach(function(e){"object"==typeof n[e]&&"pinterest"===e?r+=h.templates("head-meta")({metaName:e,noPin:!0,metaValue:n[e].nopin,metaDescription:n[e].reason,isName:!0})+"\n":"og:description"===e?r+=h.templates("head-meta")({metaName:e,metaValue:n[e]})+"\n":"og:type"===e?r+=h.templates("head-meta")({metaName:e,metaValue:"article"})+"\n":"title"===e?r+=h.templates("head-meta")({isName:!0,metaName:"title",metaValue:n[e]})+"\n":"keywords"===e?r+=h.templates("head-meta")({isName:!0,metaName:e,metaValue:n[e]})+"\n":"noindexfollow"===e?n[e]&&(n[e]>0||""!==n[e])&&(r+=h.templates("head-meta")({isName:!0,metaName:"robots",metaValue:"noindex,follow"})+"\n",r+=h.templates("head-meta")({isName:!0,metaName:"googlebot",metaValue:"noindex,follow"})+"\n"):r+=h.templates("head-meta")({metaName:e,metaValue:n[e]})+"\n"}),p.forEach(function(e){e.addedBy=h.name,r+=h.templates("head-link")(e)+"\n"}),o&&(t=o.getSizeToFit({width:1024,height:1024})),r+=h.templates("head-breadcrumb")({pathAliasOrNsid:i.getValue("pathAlias")||i.getValue("id"),displayName:i.getValue("displayname"),avatarUrl:l.default,photoId:o.getValue("id"),title:o.getValue("title")||this.intlMessage({intlName:"common.UNTITLED"}),photoPreview:t?t.url:null,licenseUrl:this.mapLicenseUrl(o.getValue("license"))}),this.set("headContainer",r),YUI.Env.isServer||this.updateHead(),this}});return e.mix(t.prototype,e.Seo),t},"@VERSION@",{requires:["flickr-view","hermes-template-head-meta","hermes-template-head-link","hermes-template-head-breadcrumb"],optional:["photo-head-meta-models","photo-route","url","seo"],langBundles:["meta","common","attribution","share-modal"]});